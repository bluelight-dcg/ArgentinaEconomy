<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Interactive Population Chart with Filter</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
<style>
  #chartContainer {
    width: 100%;
    max-width: 800px; /* Adjust max-width as needed */
    height: calc(100vw * 9 / 16); /* Calculate height based on 16:9 aspect ratio */
    max-height: 450px; /* Adjust max-height as needed */
  }
</style>
</head>
<body>
<div>
  <label for="filter">Choose a filter:</label>
  <select id="filter" onchange="updateChart()">
    <option value="frecuenciaRelativa">Frecuencia Relativa</option>
    <option value="frecuenciaAcumulada">Frecuencia Acumulada</option>
  </select>
</div>
<div id="chartContainer">
  <canvas id="populationChart"></canvas>
</div>

<script>
// Data
var grupos = ['0 a 15', '15 a 25', '25 a 40', '40 a 50', '50 a 65', '65 y más'];
var frecuenciasRelativas = [0.2498, 0.1594, 0.2330, 0.1307, 0.1196, 0.0782];
var frecuenciasAcumuladas = [3890126, 6371641, 9999556, 12035980, 13898859, 15116435];
var colors = ['rgba(255, 99, 132, 0.5)', 'rgba(54, 162, 235, 0.5)', 'rgba(255, 206, 86, 0.5)', 'rgba(75, 192, 192, 0.5)', 'rgba(153, 102, 255, 0.5)', 'rgba(255, 159, 64, 0.5)'];

// Initial filter
var selectedFilter = 'frecuenciaRelativa';

// Create chart data
var chartData = {
  labels: grupos,
  datasets: [{
    label: 'Frecuencia Relativa',
    data: frecuenciasRelativas,
    backgroundColor: colors,
    borderWidth: 1
  }]
};

// Create chart options
var chartOptions = {
  scales: {
    y: {
      beginAtZero: true,
      title: {
        display: true,
        text: 'Frecuencia relativa'
      }
    }
  },
  plugins: {
    title: {
      display: true,
      text: 'Población por grupo etario del censo 2002 chileno'
    }
  }
};

// Create and display the chart
var ctx = document.getElementById('populationChart').getContext('2d');
var myChart = new Chart(ctx, {
  type: 'bar',
  data: chartData,
  options: chartOptions
});

// Function to update chart based on selected filter
function updateChart() {
  var filter = document.getElementById('filter').value;
  if (filter === 'frecuenciaRelativa') {
    myChart.data.datasets[0].data = frecuenciasRelativas;
    myChart.options.scales.y.title.text = 'Frecuencia relativa';
    myChart.data.datasets[0].label = 'Frecuencia Relativa';
  } else if (filter === 'frecuenciaAcumulada') {
    myChart.data.datasets[0].data = frecuenciasAcumuladas;
    myChart.options.scales.y.title.text = 'Frecuencia acumulada';
    myChart.data.datasets[0].label = 'Frecuencia Acumulada';
  }
  myChart.update();
}
</script>
</body>
</html>
